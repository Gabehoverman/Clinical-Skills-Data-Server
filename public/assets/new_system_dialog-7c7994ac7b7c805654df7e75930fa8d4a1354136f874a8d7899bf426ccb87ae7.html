<md-dialog flex="40">

	<md-toolbar>
      <div class="md-toolbar-tools">
        <h1>New System</h1>
        <span flex></span>
        <md-button class="md-icon-button" ng-click="close()" aria-label="close">
          <md-icon class="material-icons">close</md-icon>
        </md-button>
      </div>
    </md-toolbar>

    <md-dialog-content>
    	<form name="newSystemForm">

    		<div layout="row">
    			<div flex>
	    			<md-input-container class="md-block" flex="75">
		    			<label>Name</label>
	    				<input type="text" name="name" ng-model="newSystem.name" required>
	    				<div ng-messages="newSystemForm.name.$error">
      						<div ng-message="required">Name is a required field</div>
    					</div>
	    			</md-input-container>
    			</div>

    			<md-input-container>
					<md-checkbox ng-model="newSystem.visible" name="Visible">
						Visible
					</md-checkbox>
				</md-input-container>

				<span flex="10"></span>
    		</div>

    		<div layout="row">
    			<md-input-container class="md-block" flex>
    				<label>Details</label>
	    			<textarea name="details" ng-model="newSystem.details" required></textarea>
    				<div ng-messages="newSystemForm.details.$error">
  						<div ng-message="required">Details is a required field</div>
					</div>
    			</md-input-container>
    		</div>

    		<div layout="row">
		    	<md-input-container flex>
		    		<label>Active Links</label>
	    		</md-input-container>
    		</div>

    		<div>
				<md-table-container>
					<table md-table md-progress="linksPromise">
						<thead md-head md-order="query.order">
							<tr md-row>
								<th md-column md-order-by="id"><span>ID</span></th>
								<th md-column md-order-by="title"><span>Title</span></th>
								<th md-column><span>Active</span></th>
							</tr>
						</thead>
						<tbody md-body>
							<tr md-row md-select="link" md-select-id="{{link.title}}" ng-repeat="link in allLinks | filter: query.filter | orderBy: query.order | limitTo: query.limit : (query.page -1) * query.limit">
								<td md-cell>{{link.id}}</td>
								<td md-cell>{{link.title}}</td>
								<td md-cell>
									<md-checkbox ng-model="link.isUsed" ng-change="toggleActive(link)" aria-label="active"></md-checkbox>
								</td>
							</tr>
						</tbody>
					</table>
				</md-table-container>
				<md-table-pagination md-page-select md-limit="query.limit" md-page="query.page" md-total="{{allLinks.length}}" md-options="[5, 10]"></md-table-pagination>
			</div>

    	</form>
    </md-dialog-content>

    <md-dialog-actions layout="row">
    	<span flex></span>
    	<md-button class="md-raised md-primary" ng-click="create()" aria-label="create">Create</md-button>
	</md-dialog-actions>

</md-dialog>